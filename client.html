<script src="http://cdn.sockjs.org/sockjs-0.3.min.js">
  </script>


<script>
	var socket = new SockJS('http://www.codelearn.org:3000/echo');
	socket.onopen = function() {	
		console.log('open');
		socket.send("ls");
	};
	socket.onmessage = function(e) {				
		console.log('message', e.data);				

		var end_of_output = /(\$|>)\s*$/;
		
		if(end_of_output.test(e.data)){		
			console.timeEnd('timer');		
			console.time('timer');		
			socket.send("ls");	
		};

	};
	socket.onclose = function() {
		console.log('close');
	};
	socket.onerror = function(evt) { 
		console.log(evt);
	};

</script>

